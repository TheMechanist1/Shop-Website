<head>
  <meta name="google-signin-client_id" content="156261425647-fqf94ed5k1fu40sjl4q20m1u8dauhg6o.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>

<body>
  <div class="g-signin2" data-onsuccess="onSignIn"></div>

  <script>
    function onSignIn(googleUser) {
      var token = googleUser.getAuthResponse().id_token;

      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/login/google');
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      xhr.onload = function() {
        if (xhr.responseText === 'ok') {
          location.pathname = '/';
        }
      };
      xhr.send('token=' + token);
    }
  </script>
</body>
